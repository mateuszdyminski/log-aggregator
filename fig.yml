nsqMaster:
  image: nsqio/nsq
  ports:
    - "4160"
    - "4161"
  command: /nsqlookupd
nsqWorker:
  image: nsqio/nsq
  ports:
    - "4150:4150"
    - "4151:4151"
  links:
    - nsqMaster:nsqMaster
  command: /nsqd --broadcast-address=172.17.42.1 --lookupd-tcp-address=nsqMaster:4160
web1:
  build: web
  ports:
    - "8001:8001"
  links:
    - nsqWorker:nsqWorker
  environment:
    PORT: "8001"
    TOPIC: "topic1"
web2:
  build: web
  ports:
    - "8002:8002"
  links:
    - nsqWorker:nsqWorker
  environment:
    PORT: "8002"
    TOPIC: "topic1"
backend:
  build: backend
  ports:
    - "8080:8080"
  links:
    - nsqMaster:nsqMaster
  environment:
    TOPIC: "topic1"
frontend:
  build: frontend
  ports:
    - "9001:9001"
